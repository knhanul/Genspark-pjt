# 🎯 타임스탬프 편집 기능 - 사용법 (개선판)

## ✅ 해결된 문제

### 이전 문제들:
1. ❌ 모달 열고 시작 시간 설정 → 영상 재생 → **모달이 사라짐**
2. ❌ 편집 버튼 다시 클릭 → **기존 입력값 초기화됨**
3. ❌ "현재 시간" 버튼 → **항상 시작 시간에만 설정됨**

### 현재 상태:
1. ✅ 모달을 열어둔 채로 **영상 자유롭게 조작 가능**
2. ✅ 입력값이 **유지됨** (모달 재오픈 시에도)
3. ✅ 시작/종료 버튼이 **독립적으로 작동**
4. ✅ **실시간 현재 시간** 표시 (0.1초마다 업데이트)

---

## 🎬 완벽한 사용 방법

### 📍 단계별 가이드

#### 1단계: 편집 모드 활성화
```
[⚙️ 타임스탬프 편집] 버튼 클릭
  ↓
버튼이 노란색으로 변경: [⚙️ 편집 중]
  ↓
가사 옆에 ⚙️ 버튼 표시됨
```

#### 2단계: 가사 선택
```
수정할 가사의 [⚙️] 버튼 클릭
  ↓
타임스탬프 편집 모달이 열림
(이제 모달이 자동으로 닫히지 않습니다!)
```

#### 3단계: 시작 시간 설정
```
┌────────────────────────────────────┐
│ 🎬 현재 재생 시간: 15.23초         │  ← 실시간 업데이트!
└────────────────────────────────────┘

⏰ 시작 시간 (초)
[15.2    ] [📍 현재 시간] [▶️]
           ↑ 녹색 버튼!
```

**방법 A: "현재 시간" 버튼 사용 (권장)**
1. YouTube 영상을 원하는 시작 위치로 이동
2. 일시정지 (또는 재생 중이어도 OK!)
3. **"시작 시간"** 옆의 녹색 [📍 현재 시간] 버튼 클릭
4. 자동으로 현재 재생 시간이 입력됨

**방법 B: 직접 입력**
- 입력 필드에 직접 숫자 입력 (예: `15.2`)

**확인 방법:**
- [▶️] 버튼 클릭 → 해당 시간으로 이동하여 확인

#### 4단계: 종료 시간 설정
```
⏱️ 종료 시간 (초)
[18.5    ] [📍 현재 시간] [▶️]
           ↑ 빨간색 버튼!
```

**방법 A: "현재 시간" 버튼 사용 (권장)**
1. YouTube 영상을 구절이 끝나는 위치로 이동
2. 일시정지 (또는 재생 중이어도 OK!)
3. **"종료 시간"** 옆의 빨간색 [📍 현재 시간] 버튼 클릭
4. 자동으로 현재 재생 시간이 입력됨

**방법 B: 직접 입력**
- 입력 필드에 직접 숫자 입력 (예: `18.5`)

**확인 방법:**
- [▶️] 버튼 클릭 → 해당 시간으로 이동하여 확인

#### 5단계: 구간 확인
```
⏳ 구간 길이: 3.30초
15.2초 ~ 18.5초
```

- 구간 길이가 **음수**이면 빨간색으로 표시됨 (오류!)
- 정상이면 파란색

#### 6단계: 저장
```
[취소] [💾 저장]
```

1. [💾 저장] 버튼 클릭
2. "✅ 타임스탬프가 저장되었습니다!" 알림
3. 모달 자동 닫힘
4. 가사 목록에 즉시 반영됨

---

## 🎨 화면 구성

### 전체 모달
```
╔════════════════════════════════════════════════════╗
║ ⏱️ 타임스탬프 편집                           [✕] ║
╠════════════════════════════════════════════════════╣
║                                                    ║
║  1  Imagine there's no heaven                      ║
║     천국이 없다고 상상해봐요                        ║
║                                                    ║
║  🎬 현재 재생 시간: 15.23초  ← 실시간 업데이트!   ║
║                                                    ║
║  ⏰ 시작 시간 (초)                                  ║
║  [15.2      ] [📍 현재 시간] [▶️]                 ║
║                ↑ 녹색          ↑ 시간으로 이동    ║
║                                                    ║
║  ⏱️ 종료 시간 (초)                                  ║
║  [18.5      ] [📍 현재 시간] [▶️]                 ║
║                ↑ 빨간색        ↑ 시간으로 이동    ║
║                                                    ║
║  ⏳ 구간 길이: 3.30초                               ║
║  15.2초 ~ 18.5초                                   ║
║                                                    ║
║  💡 사용 방법:                                      ║
║  1. YouTube 영상을 해당 구절이 시작되는 순간으로... ║
║  ...                                               ║
║  💡 TIP: 모달 창을 열어둔 채로 YouTube 영상을...   ║
║                                                    ║
╠════════════════════════════════════════════════════╣
║                             [취소] [💾 저장]       ║
╚════════════════════════════════════════════════════╝
```

### 버튼 색상 구분
- **녹색 [📍 현재 시간]**: 시작 시간 설정
- **빨간색 [📍 현재 시간]**: 종료 시간 설정
- **회색 [▶️]**: 해당 시간으로 이동 (확인용)

---

## 💡 실전 예제

### 예제 1: 기본 사용법
```
상황: "Imagine" 1번 가사의 실제 시작이 15.2초인데 14.5초로 설정됨

1. [⚙️ 타임스탬프 편집] 클릭
2. "Imagine there's no heaven" 가사의 [⚙️] 클릭
3. YouTube에서 15.2초로 이동 (← → 키 사용)
4. 시작 시간 옆의 녹색 [📍 현재 시간] 클릭
   → "15.2" 자동 입력!
5. YouTube에서 18.5초로 이동
6. 종료 시간 옆의 빨간색 [📍 현재 시간] 클릭
   → "18.5" 자동 입력!
7. [▶️] 버튼들로 각각 확인
8. [💾 저장] 클릭
9. 완료!
```

### 예제 2: 실시간 조정
```
상황: 정확한 타이밍을 찾아야 함

1. 모달 열기
2. YouTube 영상 재생 ▶️
3. 🎬 현재 재생 시간 실시간 확인하며 대기
4. "지금이다!" 싶을 때 일시정지 ⏸️
5. 녹색/빨간색 [📍 현재 시간] 버튼 클릭
6. [▶️] 버튼으로 즉시 확인
7. 미세 조정: 입력 필드에서 ±0.1초 조정
8. 다시 [▶️] 버튼으로 확인
9. 완벽하면 [💾 저장]
```

### 예제 3: 여러 구절 연속 편집
```
1. [⚙️ 편집 중] 활성화 상태 유지
2. 첫 번째 가사 편집 완료
3. 모달 닫힘
4. 바로 다음 가사의 [⚙️] 클릭
5. 반복...
```

---

## 🎯 핵심 기능

### 1. 실시간 현재 시간 표시
```
🎬 현재 재생 시간: 15.23초
                   ↑
            0.1초마다 업데이트!
```
- YouTube 플레이어의 현재 재생 시간을 실시간으로 표시
- 모달을 열어둔 채로 영상을 재생하면 시간이 변하는 것을 확인 가능

### 2. 독립적인 시작/종료 버튼
```
시작: 녹색 [📍 현재 시간] → startTime에만 설정
종료: 빨간색 [📍 현재 시간] → endTime에만 설정
```
- 각 버튼이 독립적으로 작동
- 색상으로 쉽게 구분 가능

### 3. 즉시 확인 기능
```
[▶️] 버튼 클릭 → 해당 시간으로 이동
```
- 설정한 시작/종료 시간이 정확한지 즉시 확인
- 영상을 직접 이동시켜줌

### 4. 구간 길이 자동 계산
```
⏳ 구간 길이: 3.30초  ← 자동 계산
15.2초 ~ 18.5초
```
- 종료 시간 - 시작 시간 = 구간 길이
- 음수이면 빨간색 + 흔들림 효과 (오류 표시)

---

## 💻 키보드 단축키

### YouTube 플레이어 단축키
- `스페이스바`: 재생/일시정지
- `← →`: 5초 앞뒤로 이동
- `J K L`: 10초 뒤로, 일시정지, 10초 앞으로
- `, .`: 프레임 단위 이동 (일시정지 상태에서)
- `숫자 키 0-9`: 영상의 0%-90% 위치로 이동

### 권장 워크플로우
1. 모달 열기
2. 영상을 `← →` 키로 대략적으로 이동
3. `, .` 키로 정밀하게 조정 (일시정지 상태)
4. 녹색/빨간색 [📍 현재 시간] 버튼 클릭
5. [▶️] 버튼으로 확인

---

## ⚠️ 주의사항

### ✅ DO
- ✅ 모달을 열어둔 채로 YouTube 조작
- ✅ 실시간 재생 시간을 보며 타이밍 찾기
- ✅ [▶️] 버튼으로 설정 확인하기
- ✅ 정확한 타이밍을 위해 일시정지 후 설정

### ❌ DON'T
- ❌ 오버레이(모달 배경)를 클릭하면 닫힘 (주의!)
- ❌ 종료 시간이 시작 시간보다 작으면 저장 불가
- ❌ 입력 필드를 비워두고 저장 시도

---

## 🐛 문제 해결

### Q1: "현재 시간" 버튼을 눌러도 0.00초로 설정됨
**A:** YouTube 플레이어가 아직 준비되지 않았을 수 있습니다.
- 영상을 한 번 재생한 후 다시 시도
- 브라우저 콘솔(F12)에서 에러 확인

### Q2: 모달이 자동으로 닫힘
**A:** 모달 바깥(어두운 배경)을 클릭하면 닫힙니다.
- 모달 안쪽의 흰색 영역만 클릭하세요
- YouTube 플레이어는 모달 밖에 있으므로 자유롭게 조작 가능

### Q3: 입력값이 사라짐
**A:** 이 문제는 수정되었습니다! (v2.0)
- 모달을 닫았다가 다시 열어도 마지막 입력값 유지
- 다른 가사를 편집할 때만 초기화됨

### Q4: 시작과 종료가 동일한 시간으로 설정됨
**A:** 이 문제도 수정되었습니다! (v2.0)
- 녹색 버튼 → 시작 시간에만 설정
- 빨간색 버튼 → 종료 시간에만 설정
- 각 버튼이 독립적으로 작동

---

## 📊 업데이트 내역

### v2.0 (2026-01-11 - 현재)
- ✅ 모달 자동 닫힘 문제 수정
- ✅ 입력값 초기화 문제 수정
- ✅ "현재 시간" 버튼 독립 작동
- ✅ 실시간 현재 시간 표시 추가
- ✅ [▶️] 확인 버튼 추가
- ✅ 시작/종료 버튼 색상 구분
- ✅ 구간 길이 음수 시 에러 표시

### v1.0 (2026-01-11)
- 타임스탬프 편집 기능 최초 구현

---

## 🎊 최종 정리

### 핵심 개선사항
1. **모달 유지**: 영상 재생해도 모달 안 닫힘
2. **입력 유지**: 모달 재오픈 시 값 유지
3. **버튼 독립**: 시작/종료 각각 작동
4. **실시간 표시**: 현재 재생 시간 실시간 업데이트
5. **즉시 확인**: [▶️] 버튼으로 바로 확인

### 사용법 요약
```
1. [⚙️ 타임스탬프 편집] 클릭
2. 가사의 [⚙️] 클릭
3. YouTube 이동 → 녹색 [📍 현재 시간] (시작)
4. YouTube 이동 → 빨간색 [📍 현재 시간] (종료)
5. [▶️] 버튼으로 확인
6. [💾 저장]
```

이제 완벽하게 작동합니다! 🎉

---

**마지막 업데이트**: 2026-01-11 v2.0  
**작성자**: GenSpark AI Developer
