#!/bin/bash

echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "ðŸŽµ íŒì†¡ í•™ìŠµ ì•± ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""

# 1. ë°±ì—”ë“œ ì‹¤í–‰
echo "ðŸ“¡ ë°±ì—”ë“œ ì„œë²„ ì‹¤í–‰ ì¤‘..."
echo "   í¬íŠ¸: 3000"
echo ""
node server/index.js &
BACKEND_PID=$!

# 2ì´ˆ ëŒ€ê¸°
sleep 2

# 2. í”„ë¡ íŠ¸ì—”ë“œ ì‹¤í–‰
echo ""
echo "ðŸŽ¨ í”„ë¡ íŠ¸ì—”ë“œ ì„œë²„ ì‹¤í–‰ ì¤‘..."
echo "   í¬íŠ¸: 3001"
echo ""
cd client && PORT=3001 npm start &
FRONTEND_PID=$!

echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo "âœ… ì„œë²„ ì‹¤í–‰ ì™„ë£Œ!"
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "ðŸ“ ì ‘ì† ì£¼ì†Œ:"
echo "   - ë°±ì—”ë“œ API: http://localhost:3000"
echo "   - í”„ë¡ íŠ¸ì—”ë“œ: http://localhost:3001"
echo ""
echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
echo ""
echo "âš ï¸  ì¢…ë£Œí•˜ë ¤ë©´ Ctrl+Cë¥¼ ëˆ„ë¥´ì„¸ìš”"
echo ""

# í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ ì²˜ë¦¬
trap "echo ''; echo 'ì„œë²„ë¥¼ ì¢…ë£Œí•©ë‹ˆë‹¤...'; kill $BACKEND_PID $FRONTEND_PID 2>/dev/null; exit" INT TERM

# ëŒ€ê¸°
wait
